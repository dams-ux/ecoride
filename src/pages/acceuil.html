<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECORIDE - La route verte</title>
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/navfooter.css">
    <!-- Dans le <head> -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

</head>
<body>
    <nav class="navbar-ecoride">
    <div class="navbar-left">
        <img src="assets/image voiture.png" alt="image voiture" class="navbar-logo">
    </div>
    <div class="navbar-center">
        <a href="../pages/home.html" class="navbar-btn">Accueil</a>
        <a href="../pages/covoiturage.html" class="navbar-btn">Covoiturage</a>
        <a href="#" class="navbar-btn">Contact</a>
    </div>
    <div class="navbar-right" style="position:relative;">
        <div class="dropdown-user">
            <span class="navbar-icon-user" style="display:flex;align-items:center;gap:4px;cursor:pointer;">
                <img src="assets/Icon.png" alt="Utilisateur" style="height:32px;">
                <!-- Fl√®che SVG fine -->
                <svg width="22" height="22" viewBox="0 0 24 24" style="vertical-align:middle; margin-left:3px;">
                    <polyline points="6 9 12 15 18 9" fill="none" stroke="#205c2c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </span>
            <div class="dropdown-content">
                <a href="../pages/login.html">Connexion</a>
                <a href="../pages/signup.html">Inscription</a>
            </div>
        </div>
        <img src="assets/image energie.png" alt="Energie" class="navbar-energie">
    </div>
</nav>


    <!-- Bandeau principal -->
<header style="background:#f2efc6;padding:0;margin:0;">
    <img src="assets/fond2.png" alt="Logo Ecoride" style="width:100%;display:block;">
</header>
<div class="barre-recherche">
    <label for="depart" style="position:absolute;left:-9999px;">D√©part</label>
    <input id="depart" type="text" placeholder="D√©part">

    <label for="destination" style="position:absolute;left:-9999px;">Destination</label>
    <input id="destination" type="text" placeholder="Destination">

    <label for="passagers" style="position:absolute;left:-9999px;">Nombre de passagers</label>
    <select id="passagers" title="Nombre de passagers">
        <option>Passagers</option>
        <option>1</option>
        <option>2</option>
        <option>3+</option>
    </select>

    <label for="date" style="position:absolute;left:-9999px;">Date du trajet</label>
    <input id="date" type="date" title="Date du trajet">

    <button>üîç</button>
</div>


    <!-- Section principale -->
<section class="main-content">
    <div class="main-inner">
    <div class="ligne-centree">
        <div class="bloc-image-gauche">
            <img src="assets/photo 1.png" alt="Appel de covoiturage √©cologique" class="image-covoit">
        </div>
        <div class="bloc-texte-droite">
            <p>
                L‚Äôambition "EcoRide" est de devenir la principale plateforme de covoiturage pour les voyageurs soucieux de l‚Äôenvironnement et ceux qui recherchent une solution √©conomique pour leurs d√©placements. Avec la mont√©e des pr√©occupations √©cologiques, la voiture √©lectrique devient une alternative incontournable. Contrairement aux v√©hicules thermiques, elle ne rejette pas de CO‚ÇÇ pendant son utilisation, ce qui limite la pollution de l‚Äôair et les √©missions de gaz √† effet de serre. De plus, elle est souvent plus silencieuse, contribuant √† r√©duire la pollution sonore en ville. Cependant, son impact d√©pend de la mani√®re dont l‚Äô√©lectricit√© est produite. Si elle provient d‚Äô√©nergies renouvelables, alors la voiture √©lectrique peut r√©ellement devenir un levier fort pour une mobilit√© plus verte.
            </p>
        </div>
    </div>
    <div class="ligne-centree">
        <div class="bloc-texte-gauche">
            <p>
                M√™me sans voiture √©lectrique, il est possible d‚Äôadopter des gestes √©cologiques au volant. R√©duire sa vitesse, √©viter les acc√©l√©rations brusques et entretenir r√©guli√®rement son v√©hicule permet de limiter sa consommation de carburant. Le covoiturage est aussi une solution efficace pour diminuer le nombre de voitures sur les routes. En privil√©giant les transports en commun ou les d√©placements √† v√©lo pour les trajets courts, chacun peut contribuer √† r√©duire son empreinte carbone. L‚Äô√©cologie commence souvent par de petits gestes, accessibles √† tous.
            </p>
        </div>
        <div class="bloc-image-droite">
            <img src="assets/image 2.png" alt="Succ√®s covoiturage" class="image-covoit">
        </div>
    </div>
</div>
</section>

    <footer class="footer-ecoride">
       <p>Mentions L√©gales</p>
       <p> ecoridenature@hotmail.fr</p>
       <!-- Bouton de d√©connexion d'urgence pour les tests -->
       <div style="text-align: center; margin-top: 10px;">
           <button onclick="handleLogout()" style="background: #f44336; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px;">üö™ D√©connexion d'urgence</button>
           <button onclick="debugAuth()" style="background: #2196F3; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 12px; margin-left: 10px;">üîç Debug Auth</button>
       </div>
    </footer>

    <!-- Menu d√©roulant JS -->
    <script src="../scripts/auth.js"></script>
    <script src="../scripts/fonction.js"></script>
    <script src="../scripts/trajet.js"></script>
    <script>
        // Fonction de d√©connexion
        function handleLogout() {
            if (confirm('Voulez-vous vraiment vous d√©connecter ?')) {
                auth.logout();
                updateAuthUI();
                alert('D√©connexion r√©ussie !');
                window.location.reload();
            }
        }

        // Fonction de debug pour l'authentification
        function debugAuth() {
            console.log('=== DEBUG AUTH STATE ===');
            console.log('Is logged in:', auth.isLoggedIn());
            console.log('Current user:', auth.getCurrentUser());
            console.log('All users:', auth.users);
            alert('√âtat d\'authentification affich√© dans la console (F12)');
        }

        // Mettre √† jour l'interface selon l'√©tat de connexion
        function updateAuthUI() {
            const isLoggedIn = auth.isLoggedIn();
            const currentUser = auth.getCurrentUser();
            const dropdownContent = document.querySelector('.dropdown-content');
            
            if (dropdownContent) {
                if (isLoggedIn && currentUser) {
                    // Utilisateur connect√© : remplacer par Mon compte et D√©connexion
                    dropdownContent.innerHTML = `
                        <a href="${currentUser.role === 'conducteur' ? 'comptecon.html' : 'comptevoyageur.html'}">Mon compte (${currentUser.prenom})</a>
                        <button onclick="handleLogout()" style="background: #f44336; color: white; border: none; cursor: pointer; text-align: left; width: 100%; padding: 8px 12px; font-size: 14px; border-radius: 4px;">üö™ D√©connexion</button>
                    `;
                } else {
                    // Utilisateur non connect√© : afficher Connexion et Inscription
                    dropdownContent.innerHTML = `
                        <a href="../pages/login.html">Connexion</a>
                        <a href="../pages/signup.html">Inscription</a>
                    `;
                }
            }
        }

        // Initialiser au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            updateAuthUI();
        });
    </script>
</body>
</html>
